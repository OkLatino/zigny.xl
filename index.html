<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZIGNY.XL | Contacto & Portafolio Pro Gamer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d0d0d;
            margin: 0;
            overflow-x: hidden;
        }

        #liquid-chrome-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background: #000;
        }

        #liquid-chrome-canvas canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        #content-wrapper {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            padding-top: 5rem;
        }

        .electric-border {
            --electric-border-color: #0ff;
            --eb-border-width: 2px;
            --electric-light-color: #7df9ff;
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            backdrop-filter: blur(8px);
            background-color: rgba(10, 10, 10, 0.7);
            isolation: isolate;
            border: none;
        }
        
        .eb-layers {
            position: absolute;
            inset: 0;
            border-radius: inherit;
            pointer-events: none;
            z-index: 2;
        }

        .eb-stroke,
        .eb-glow-1,
        .eb-glow-2,
        .eb-background-glow {
            position: absolute;
            inset: 0;
            border-radius: inherit;
            pointer-events: none;
            box-sizing: border-box;
        }

        .eb-stroke {
            border: var(--eb-border-width) solid var(--electric-border-color);
        }

        .eb-glow-1 {
            border: var(--eb-border-width) solid var(--electric-light-color);
            opacity: 0.5;
            filter: blur(calc(0.5px + (var(--eb-border-width) * 0.25)));
        }

        .eb-glow-2 {
            border: var(--eb-border-width) solid var(--electric-light-color);
            opacity: 0.5;
            filter: blur(calc(2px + (var(--eb-border-width) * 0.5)));
        }

        .eb-background-glow {
            z-index: -1;
            transform: scale(1.08);
            filter: blur(32px);
            opacity: 0.3;
            background: linear-gradient(-30deg, var(--electric-light-color), transparent, var(--electric-border-color));
        }

        .eb-content {
            position: relative;
            border-radius: inherit;
            z-index: 3;
            padding: 2rem;
        }

        .eb-svg {
            position: fixed;
            left: -10000px;
            top: -10000px;
            width: 10px;
            height: 10px;
            opacity: 0.001;
            pointer-events: none;
        }
        
        .tab-button.active {
            color: #0ff;
            border-bottom: 3px solid #0ff;
        }
        
        input:focus, textarea:focus {
            border-color: #0ff !important;
            box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.5) !important;
        }
        
        .cyan-glow-text {
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8), 0 0 20px rgba(0, 255, 255, 0.5);
        }

        /* Efecto metálico para el título */
        .metallic-text {
            background: linear-gradient(
                90deg,
                #0ff 0%,
                #4dd0e1 10%,
                #80deea 20%,
                #fff 30%,
                #80deea 40%,
                #4dd0e1 50%,
                #0ff 60%,
                #00bcd4 70%,
                #0097a7 80%,
                #006064 90%,
                #0ff 100%
            );
            background-size: 200% 100%;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: metallicShine 3s linear infinite;
            filter: drop-shadow(0 0 20px rgba(0, 255, 255, 0.6)) 
                    drop-shadow(0 0 40px rgba(0, 255, 255, 0.3));
        }

        @keyframes metallicShine {
            0% {
                background-position: 0% 50%;
            }
            100% {
                background-position: 200% 50%;
            }
        }
    </style>
</head>
<body class="text-white">

    <div id="liquid-chrome-canvas"></div>

    <svg class="eb-svg" aria-hidden="true" focusable="false">
        <defs>
            <filter id="electric-border-filter" colorInterpolationFilters="sRGB" x="-200%" y="-200%" width="500%" height="500%">
                <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise1" seed="1" />
                <feOffset in="noise1" dx="0" dy="0" result="offsetNoise1">
                    <animate attributeName="dy" values="700; 0" dur="6s" repeatCount="indefinite" calcMode="linear" />
                </feOffset>
                <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise2" seed="1" />
                <feOffset in="noise2" dx="0" dy="0" result="offsetNoise2">
                    <animate attributeName="dy" values="0; -700" dur="6s" repeatCount="indefinite" calcMode="linear" />
                </feOffset>
                <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise3" seed="2" />
                <feOffset in="noise3" dx="0" dy="0" result="offsetNoise3">
                    <animate attributeName="dx" values="490; 0" dur="6s" repeatCount="indefinite" calcMode="linear" />
                </feOffset>
                <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise4" seed="2" />
                <feOffset in="noise4" dx="0" dy="0" result="offsetNoise4">
                    <animate attributeName="dx" values="0; -490" dur="6s" repeatCount="indefinite" calcMode="linear" />
                </feOffset>
                <feComposite in="offsetNoise1" in2="offsetNoise2" result="part1" />
                <feComposite in="offsetNoise3" in2="offsetNoise4" result="part2" />
                <feBlend in="part1" in2="part2" mode="color-dodge" result="combinedNoise" />
                <feDisplacementMap in="SourceGraphic" in2="combinedNoise" scale="30" xChannelSelector="R" yChannelSelector="B" />
            </filter>
        </defs>
    </svg>

    <nav class="fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-md shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="#hero" class="text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-sky-500">ZIGNY.XL</a>
                <div class="flex space-x-6 text-lg">
                    <a href="#contacto-general" class="text-gray-300 hover:text-cyan-400 transition">Contacto</a>
                    <a href="#galeria" class="text-gray-300 hover:text-cyan-400 transition">Galería</a>
                    <a href="#hiring" class="text-gray-300 hover:text-cyan-400 transition">Empresas</a>
                </div>
            </div>
        </div>
    </nav>

    <main id="content-wrapper" class="p-4 md:p-8">

        <section id="contacto-general" class="max-w-3xl mx-auto py-20 min-h-screen flex flex-col justify-center items-center">
            <div class="text-center mb-12" id="hero">
                <h1 class="text-6xl md:text-8xl font-black tracking-tighter metallic-text">
                    ZIGNY.XL
                </h1>
                <p class="text-gray-300 mt-4 text-xl md:text-2xl font-light">
                    Elite FPS Player. Creador de contenido. Llevando el cromo a la victoria.
                </p>
            </div>
            
            <div class="electric-border w-full max-w-xl transition duration-500">
                <div class="eb-layers">
                    <div class="eb-stroke"></div>
                    <div class="eb-glow-1"></div>
                    <div class="eb-glow-2"></div>
                    <div class="eb-background-glow"></div>
                </div>
                <div class="eb-content p-8">
                    <h2 class="text-3xl font-bold text-cyan-400 mb-4 text-center"><i class="fas fa-headset mr-2"></i> Mensaje Directo (Fans/General)</h2>
                    
                    <form action="#" method="POST" class="space-y-4">
                        <div>
                            <label for="fan-name" class="block text-sm font-medium text-gray-300">Tu Alias/Nombre</label>
                            <input type="text" id="fan-name" name="fan-name" required
                                   placeholder="Ej. Ghost_Killer"
                                   class="mt-1 w-full p-3 bg-gray-900/50 border border-gray-700 rounded-lg text-white focus:ring-cyan-500 focus:border-cyan-500 transition duration-300">
                        </div>

                        <div>
                            <label for="fan-message" class="block text-sm font-medium text-gray-300">Mensaje Rápido</label>
                            <textarea id="fan-message" name="fan-message" rows="3" required
                                      placeholder="¡Gran clip! ¿Cuál es tu sensibilidad?"
                                      class="mt-1 w-full p-3 bg-gray-900/50 border border-gray-700 rounded-lg text-white focus:ring-cyan-500 focus:border-cyan-500 transition duration-300"></textarea>
                        </div>

                        <button type="submit"
                                class="w-full py-3 mt-4 text-lg font-bold rounded-lg bg-cyan-600 hover:bg-cyan-700 text-black shadow-lg shadow-cyan-500/50 transition duration-300 transform hover:scale-[1.01]">
                            ENVIAR MENSAJE &gt;&gt;
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <section id="galeria" class="max-w-5xl mx-auto py-20">
            <h2 class="text-5xl font-extrabold text-center mb-12 text-cyan-400 drop-shadow-md">
                <i class="fas fa-video mr-3"></i> GALERÍA CROMADA
            </h2>

            <div class="flex justify-center border-b-2 border-gray-700 mb-8">
                <button id="clips-tab" class="tab-button active text-xl font-semibold py-3 px-6 mx-2 transition duration-300" onclick="showTab('clips')">
                    Clips de Jugadas <i class="fas fa-crosshairs ml-2"></i>
                </button>
                <button id="photos-tab" class="tab-button text-gray-400 hover:text-cyan-400 text-xl font-semibold py-3 px-6 mx-2 transition duration-300" onclick="showTab('photos')">
                    Fotos & Setup <i class="fas fa-camera-retro ml-2"></i>
                </button>
            </div>

            <div id="clips-content" class="tab-content grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="electric-border p-4 text-center aspect-video flex flex-col justify-center items-center">
                    <div class="eb-layers"><div class="eb-stroke"></div><div class="eb-glow-1"></div><div class="eb-glow-2"></div><div class="eb-background-glow"></div></div>
                    <div class="eb-content w-full h-full flex flex-col justify-center items-center bg-gray-900/50 p-4">
                        <i class="fab fa-youtube text-6xl text-red-500 mb-3"></i>
                        <p class="text-gray-400">CLIP 1: Ace en el Último Segundo (Placeholder)</p>
                        <a href="#" class="text-cyan-400 hover:text-cyan-300 mt-2 font-medium">Ver en YouTube</a>
                    </div>
                </div>
                <div class="electric-border p-4 text-center aspect-video flex flex-col justify-center items-center">
                    <div class="eb-layers"><div class="eb-stroke"></div><div class="eb-glow-1"></div><div class="eb-glow-2"></div><div class="eb-background-glow"></div></div>
                    <div class="eb-content w-full h-full flex flex-col justify-center items-center bg-gray-900/50 p-4">
                        <i class="fab fa-twitch text-6xl text-purple-500 mb-3"></i>
                        <p class="text-gray-400">CLIP 2: Clutch 1v3 (Placeholder)</p>
                        <a href="#" class="text-cyan-400 hover:text-cyan-300 mt-2 font-medium">Ver en Twitch</a>
                    </div>
                </div>
                <div class="electric-border p-4 text-center aspect-video flex flex-col justify-center items-center">
                    <div class="eb-layers"><div class="eb-stroke"></div><div class="eb-glow-1"></div><div class="eb-glow-2"></div><div class="eb-background-glow"></div></div>
                    <div class="eb-content w-full h-full flex flex-col justify-center items-center bg-gray-900/50 p-4">
                        <i class="fas fa-trophy text-6xl text-yellow-500 mb-3"></i>
                        <p class="text-gray-400">CLIP 3: Jugada Destacada del Torneo (Placeholder)</p>
                        <a href="#" class="text-cyan-400 hover:text-cyan-300 mt-2 font-medium">Ver Clip</a>
                    </div>
                </div>
            </div>

            <div id="photos-content" class="tab-content hidden grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="electric-border p-4 text-center aspect-square flex flex-col justify-center items-center">
                    <div class="eb-layers"><div class="eb-stroke"></div><div class="eb-glow-1"></div><div class="eb-glow-2"></div><div class="eb-background-glow"></div></div>
                    <div class="eb-content w-full h-full flex flex-col justify-center items-center bg-gray-900/50 p-4">
                        <i class="fas fa-desktop text-6xl text-gray-500 mb-3"></i>
                        <p class="text-gray-400">Foto 1: Setup de Batalla (Placeholder)</p>
                    </div>
                </div>
                <div class="electric-border p-4 text-center aspect-square flex flex-col justify-center items-center">
                    <div class="eb-layers"><div class="eb-stroke"></div><div class="eb-glow-1"></div><div class="eb-glow-2"></div><div class="eb-background-glow"></div></div>
                    <div class="eb-content w-full h-full flex flex-col justify-center items-center bg-gray-900/50 p-4">
                        <i class="fas fa-gamepad text-6xl text-gray-500 mb-3"></i>
                        <p class="text-gray-400">Foto 2: Periféricos (Placeholder)</p>
                    </div>
                </div>
                <div class="electric-border p-4 text-center aspect-square flex flex-col justify-center items-center">
                    <div class="eb-layers"><div class="eb-stroke"></div><div class="eb-glow-1"></div><div class="eb-glow-2"></div><div class="eb-background-glow"></div></div>
                    <div class="eb-content w-full h-full flex flex-col justify-center items-center bg-gray-900/50 p-4">
                        <i class="fas fa-user-astronaut text-6xl text-gray-500 mb-3"></i>
                        <p class="text-gray-400">Foto 3: Foto Promocional (Placeholder)</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="hiring" class="max-w-3xl mx-auto py-20 min-h-screen flex flex-col justify-center items-center">
            <div class="electric-border w-full transition duration-500">
                <div class="eb-layers">
                    <div class="eb-stroke"></div>
                    <div class="eb-glow-1"></div>
                    <div class="eb-glow-2"></div>
                    <div class="eb-background-glow"></div>
                </div>
                <div class="eb-content p-8 md:p-12">
                    <h2 class="text-4xl font-extrabold text-cyan-400 mb-6 text-center"><i class="fas fa-briefcase mr-2"></i> Contacto Empresarial (Hiring)</h2>
                    <p class="text-gray-400 mb-8 text-center">Formulario exclusivo para marcas y empresas interesadas en creación de video o patrocinios.</p>
                    
                    <form action="#" method="POST" class="space-y-6">
                        <div>
                            <label for="company-name" class="block text-sm font-medium text-gray-300">Nombre de la Empresa / Marca</label>
                            <input type="text" id="company-name" name="company-name" required
                                   placeholder="Ej. Estudio Alpha"
                                   class="mt-1 w-full p-3 bg-gray-900/50 border border-gray-700 rounded-lg text-white focus:ring-cyan-500 focus:border-cyan-500 transition duration-300">
                        </div>

                        <div>
                            <label for="company-email" class="block text-sm font-medium text-gray-300">Correo Electrónico de Contacto</label>
                            <input type="email" id="company-email" name="company-email" required
                                   placeholder="contacto@empresa.com"
                                   class="mt-1 w-full p-3 bg-gray-900/50 border border-gray-700 rounded-lg text-white focus:ring-cyan-500 focus:border-cyan-500 transition duration-300">
                        </div>

                        <div>
                            <label for="service" class="block text-sm font-medium text-gray-300">Tipo de Servicio Requerido</label>
                            <select id="service" name="service" required
                                    class="mt-1 w-full p-3 bg-gray-900/50 border border-gray-700 rounded-lg text-white focus:ring-cyan-500 focus:border-cyan-500 transition duration-300 appearance-none">
                                <option value="" disabled selected class="bg-gray-800">Selecciona el servicio...</option>
                                <option value="video-creation" class="bg-gray-800">Creación de Video/Edición</option>
                                <option value="sponsorship" class="bg-gray-800">Patrocinio de Contenido/Stream</option>
                                <option value="tournament" class="bg-gray-800">Participación en Torneos/Eventos</option>
                                <option value="other" class="bg-gray-800">Otro (Especificar en Mensaje)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="company-message" class="block text-sm font-medium text-gray-300">Detalles de la Propuesta (Menciona Presupuesto)</label>
                            <textarea id="company-message" name="company-message" rows="5" required
                                      placeholder="Estamos buscando un paquete de 3 videos promocionales con un presupuesto de $X..."
                                      class="mt-1 w-full p-3 bg-gray-900/50 border border-gray-700 rounded-lg text-white focus:ring-cyan-500 focus:border-cyan-500 transition duration-300"></textarea>
                        </div>

                        <button type="submit"
                                class="w-full py-3 mt-4 text-lg font-bold rounded-lg bg-cyan-600 hover:bg-cyan-700 text-black shadow-lg shadow-cyan-500/50 transition duration-300 transform hover:scale-[1.01] hover:shadow-cyan-400/80">
                            ENVIAR PROPUESTA PROFESIONAL <i class="fas fa-angle-double-right ml-2"></i>
                        </button>
                    </form>
                </div>
            </div>
        </section>

    </main>
    
    <footer class="relative z-10 text-center py-8 border-t border-gray-800 bg-gray-900/50">
        <p class="text-sm text-gray-400 mb-4">Sígueme en la Arena:</p>
        <div class="flex justify-center space-x-6">
            <a href="#" class="text-gray-400 hover:text-cyan-400 text-2xl transition"><i class="fab fa-twitter"></i></a>
            <a href="#" class="text-gray-400 hover:text-cyan-400 text-2xl transition"><i class="fab fa-twitch"></i></a>
            <a href="#" class="text-gray-400 hover:text-cyan-400 text-2xl transition"><i class="fab fa-youtube"></i></a>
            <a href="#" class="text-gray-400 hover:text-cyan-400 text-2xl transition"><i class="fab fa-instagram"></i></a>
        </div>
        <p class="text-xs text-gray-600 mt-4">ZIGNY.XL &copy; 2024 | Powered by Liquid Chrome</p>
    </footer>

    <script>
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
                button.classList.add('text-gray-400', 'hover:text-cyan-400');
            });
            document.getElementById(tabName + '-content').classList.remove('hidden');
            const activeTabButton = document.getElementById(tabName + '-tab');
            activeTabButton.classList.add('active');
            activeTabButton.classList.remove('text-gray-400', 'hover:text-cyan-400');
        }

        function updateElectricBorders() {
            const containers = document.querySelectorAll('.electric-border');
            
            containers.forEach((host) => {
                const stroke = host.querySelector('.eb-stroke');
                const svg = document.querySelector('.eb-svg');
                const filterId = 'electric-border-filter';

                if (!stroke || !svg) return;

                stroke.style.filter = `url(#${filterId})`;
                
                const width = Math.max(1, Math.round(host.clientWidth));
                const height = Math.max(1, Math.round(host.clientHeight));

                const dyAnims = Array.from(svg.querySelectorAll('feOffset > animate[attributeName="dy"]'));
                if (dyAnims.length >= 2) {
                    dyAnims[0].setAttribute('values', `${height}; 0`);
                    dyAnims[1].setAttribute('values', `0; -${height}`);
                }

                const dxAnims = Array.from(svg.querySelectorAll('feOffset > animate[attributeName="dx"]'));
                if (dxAnims.length >= 2) {
                    dxAnims[0].setAttribute('values', `${width}; 0`);
                    dxAnims[1].setAttribute('values', `0; -${width}`);
                }
                
                dyAnims.concat(dxAnims).forEach(a => {
                    try {
                        a.beginElement();
                    } catch (e) {}
                });
            });
        }

        // Galaxy Background optimizado para mejor rendimiento
        function initGalaxy() {
            const container = document.getElementById('liquid-chrome-canvas');
            if (!container) return;

            // Configuración optimizada (valores más bajos = mejor rendimiento)
            const focal = [0.5, 0.5];
            const rotation = [1.0, 0.0];
            const starSpeed = 0.5;
            const density = 0.8; // Reducido de 1 a 0.8 para mejor rendimiento
            const hueShift = 140;
            const speed = 1.0;
            const mouseInteraction = true;
            const glowIntensity = 0.25; // Reducido de 0.3 a 0.25
            const saturation = 0.0;
            const mouseRepulsion = true;
            const repulsionStrength = 2;
            const twinkleIntensity = 0.3;
            const rotationSpeed = 0.05; // Reducido de 0.1 para menos cálculos
            const autoCenterRepulsion = 0;
            
            // Factor de escala para renderizar a menor resolución
            const renderScale = 0.75; // 75% de resolución = mejor rendimiento

            // Crear escena, cámara y renderer
            const scene = new THREE.Scene();
            const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);
            
            const renderer = new THREE.WebGLRenderer({ 
                antialias: false, // Desactivar para mejor rendimiento
                alpha: false,
                powerPreference: "high-performance" // Usar GPU de alto rendimiento
            });
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5)); // Limitar pixel ratio
            renderer.setSize(window.innerWidth * renderScale, window.innerHeight * renderScale);
            renderer.setClearColor(0x000000, 1);
            
            // Escalar el canvas al tamaño completo
            renderer.domElement.style.width = '100%';
            renderer.domElement.style.height = '100%';
            container.appendChild(renderer.domElement);

            const geometry = new THREE.PlaneGeometry(2, 2);

            // Variables de mouse
            const targetMousePos = { x: 0.5, y: 0.5 };
            const smoothMousePos = { x: 0.5, y: 0.5 };
            let targetMouseActive = 0.0;
            let smoothMouseActive = 0.0;
            
            // Throttle para mouse move (actualizar menos frecuentemente)
            let lastMouseUpdate = 0;
            const mouseUpdateInterval = 16; // ~60fps

            // Shader optimizado
            const material = new THREE.ShaderMaterial({
                uniforms: {
                    uTime: { value: 0 },
                    uResolution: { value: new THREE.Vector3(window.innerWidth * renderScale, window.innerHeight * renderScale, (window.innerWidth * renderScale) / (window.innerHeight * renderScale)) },
                    uFocal: { value: new THREE.Vector2(...focal) },
                    uRotation: { value: new THREE.Vector2(...rotation) },
                    uStarSpeed: { value: starSpeed },
                    uDensity: { value: density },
                    uHueShift: { value: hueShift },
                    uSpeed: { value: speed },
                    uMouse: { value: new THREE.Vector2(smoothMousePos.x, smoothMousePos.y) },
                    uGlowIntensity: { value: glowIntensity },
                    uSaturation: { value: saturation },
                    uMouseRepulsion: { value: mouseRepulsion },
                    uTwinkleIntensity: { value: twinkleIntensity },
                    uRotationSpeed: { value: rotationSpeed },
                    uRepulsionStrength: { value: repulsionStrength },
                    uMouseActiveFactor: { value: 0.0 },
                    uAutoCenterRepulsion: { value: autoCenterRepulsion }
                },
                vertexShader: `
                    varying vec2 vUv;
                    void main() {
                        vUv = uv;
                        gl_Position = vec4(position, 1.0);
                    }
                `,
                fragmentShader: `
                    precision mediump float; // Cambiar de highp a mediump para mejor rendimiento

                    uniform float uTime;
                    uniform vec3 uResolution;
                    uniform vec2 uFocal;
                    uniform vec2 uRotation;
                    uniform float uStarSpeed;
                    uniform float uDensity;
                    uniform float uHueShift;
                    uniform float uSpeed;
                    uniform vec2 uMouse;
                    uniform float uGlowIntensity;
                    uniform float uSaturation;
                    uniform bool uMouseRepulsion;
                    uniform float uTwinkleIntensity;
                    uniform float uRotationSpeed;
                    uniform float uRepulsionStrength;
                    uniform float uMouseActiveFactor;
                    uniform float uAutoCenterRepulsion;

                    varying vec2 vUv;

                    #define NUM_LAYER 3.0 // Reducido de 4.0 a 3.0
                    #define STAR_COLOR_CUTOFF 0.2
                    #define MAT45 mat2(0.7071, -0.7071, 0.7071, 0.7071)
                    #define PERIOD 3.0

                    float Hash21(vec2 p) {
                        p = fract(p * vec2(123.34, 456.21));
                        p += dot(p, p + 45.32);
                        return fract(p.x * p.y);
                    }

                    float tri(float x) {
                        return abs(fract(x) * 2.0 - 1.0);
                    }

                    float tris(float x) {
                        float t = fract(x);
                        return 1.0 - smoothstep(0.0, 1.0, abs(2.0 * t - 1.0));
                    }

                    float trisn(float x) {
                        float t = fract(x);
                        return 2.0 * (1.0 - smoothstep(0.0, 1.0, abs(2.0 * t - 1.0))) - 1.0;
                    }

                    vec3 hsv2rgb(vec3 c) {
                        vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
                        vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
                        return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
                    }

                    float Star(vec2 uv, float flare) {
                        float d = length(uv);
                        float m = (0.05 * uGlowIntensity) / d;
                        float rays = smoothstep(0.0, 1.0, 1.0 - abs(uv.x * uv.y * 1000.0));
                        m += rays * flare * uGlowIntensity;
                        uv *= MAT45;
                        rays = smoothstep(0.0, 1.0, 1.0 - abs(uv.x * uv.y * 1000.0));
                        m += rays * 0.3 * flare * uGlowIntensity;
                        m *= smoothstep(1.0, 0.2, d);
                        return m;
                    }

                    vec3 StarLayer(vec2 uv) {
                        vec3 col = vec3(0.0);
                        vec2 gv = fract(uv) - 0.5;
                        vec2 id = floor(uv);

                        // Reducir loop de 3x3 a células vecinas esenciales
                        for (int y = -1; y <= 1; y++) {
                            for (int x = -1; x <= 1; x++) {
                                vec2 offset = vec2(float(x), float(y));
                                vec2 si = id + offset;
                                float seed = Hash21(si);
                                float size = fract(seed * 345.32);
                                
                                // Simplificar cálculo de brillo
                                float glossLocal = tri(uStarSpeed / (PERIOD * seed + 1.0));
                                float flareSize = smoothstep(0.9, 1.0, size) * glossLocal;

                                // Simplificar color
                                float red = smoothstep(STAR_COLOR_CUTOFF, 1.0, Hash21(si + 1.0)) + STAR_COLOR_CUTOFF;
                                float blu = smoothstep(STAR_COLOR_CUTOFF, 1.0, Hash21(si + 3.0)) + STAR_COLOR_CUTOFF;
                                float grn = min(red, blu) * seed;
                                vec3 base = vec3(red, grn, blu);
                                
                                // Simplificar conversión HSV
                                float hue = atan(base.g - base.r, base.b - base.r) * 0.1591 + 0.5; // Pre-calcular 1/(2*PI)
                                hue = fract(hue + uHueShift * 0.002778); // Pre-calcular 1/360
                                base = hsv2rgb(vec3(hue, uSaturation, max(max(base.r, base.g), base.b)));

                                vec2 pad = vec2(tris(seed * 34.0 + uTime * uSpeed * 0.1), tris(seed * 38.0 + uTime * uSpeed * 0.0333)) - 0.5;

                                float star = Star(gv - offset - pad, flareSize);

                                // Simplificar twinkle
                                float twinkle = trisn(uTime * uSpeed + seed * 6.2831) * 0.5 + 1.0;
                                twinkle = mix(1.0, twinkle, uTwinkleIntensity);
                                star *= twinkle;
                                
                                col += star * size * base;
                            }
                        }

                        return col;
                    }

                    void main() {
                        vec2 focalPx = uFocal * uResolution.xy;
                        vec2 uv = (vUv * uResolution.xy - focalPx) / uResolution.y;

                        // Simplificar repulsión del mouse
                        if (uMouseRepulsion) {
                            vec2 mousePosUV = (uMouse * uResolution.xy - focalPx) / uResolution.y;
                            float mouseDist = length(uv - mousePosUV);
                            vec2 repulsion = normalize(uv - mousePosUV) * (uRepulsionStrength / (mouseDist + 0.1));
                            uv += repulsion * 0.05 * uMouseActiveFactor;
                        }

                        // Rotación automática
                        float autoRotAngle = uTime * uRotationSpeed;
                        float c = cos(autoRotAngle);
                        float s = sin(autoRotAngle);
                        uv = mat2(c, -s, s, c) * uv;

                        uv = mat2(uRotation.x, -uRotation.y, uRotation.y, uRotation.x) * uv;

                        vec3 col = vec3(0.0);

                        // Menos capas = mejor rendimiento
                        for (float i = 0.0; i < 1.0; i += 1.0 / NUM_LAYER) {
                            float depth = fract(i + uStarSpeed * uSpeed);
                            float scale = mix(20.0 * uDensity, 0.5 * uDensity, depth);
                            float fade = depth * smoothstep(1.0, 0.9, depth);
                            col += StarLayer(uv * scale + i * 453.32) * fade;
                        }

                        gl_FragColor = vec4(col, 1.0);
                    }
                `
            });

            const mesh = new THREE.Mesh(geometry, material);
            scene.add(mesh);

            // Mouse tracking optimizado con throttling
            function handleMouseMove(event) {
                if (!mouseInteraction) return;
                
                const now = Date.now();
                if (now - lastMouseUpdate < mouseUpdateInterval) return;
                lastMouseUpdate = now;
                
                const rect = container.getBoundingClientRect();
                targetMousePos.x = (event.clientX - rect.left) / rect.width;
                targetMousePos.y = 1.0 - ((event.clientY - rect.top) / rect.height);
                targetMouseActive = 1.0;
            }

            function handleMouseLeave() {
                targetMouseActive = 0.0;
            }

            if (mouseInteraction) {
                container.addEventListener('mousemove', handleMouseMove, { passive: true });
                container.addEventListener('mouseleave', handleMouseLeave);
            }

            // Resize optimizado con debounce
            let resizeTimeout;
            function onResize() {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    const width = window.innerWidth * renderScale;
                    const height = window.innerHeight * renderScale;
                    
                    renderer.setSize(width, height);
                    material.uniforms.uResolution.value.set(width, height, width / height);
                    updateElectricBorders();
                }, 150);
            }

            window.addEventListener('resize', onResize, { passive: true });

            // Animation loop optimizado
            let lastTime = 0;
            const targetFPS = 60;
            const frameTime = 1000 / targetFPS;
            
            function animate(t) {
                requestAnimationFrame(animate);
                
                // Limitar frame rate si es necesario
                const deltaTime = t - lastTime;
                if (deltaTime < frameTime) return;
                lastTime = t;
                
                // Actualizar tiempo
                material.uniforms.uTime.value = t * 0.001;
                material.uniforms.uStarSpeed.value = (t * 0.001 * starSpeed) / 10.0;

                // Suavizar movimiento del mouse (interpolación más rápida = menos cálculos)
                const lerpFactor = 0.08; // Aumentado de 0.05 para respuesta más rápida
                smoothMousePos.x += (targetMousePos.x - smoothMousePos.x) * lerpFactor;
                smoothMousePos.y += (targetMousePos.y - smoothMousePos.y) * lerpFactor;
                smoothMouseActive += (targetMouseActive - smoothMouseActive) * lerpFactor;

                material.uniforms.uMouse.value.set(smoothMousePos.x, smoothMousePos.y);
                material.uniforms.uMouseActiveFactor.value = smoothMouseActive;
                
                renderer.render(scene, camera);
            }

            animate(0);
        }

        window.addEventListener('load', () => {
            initGalaxy();
            showTab('clips');
            setTimeout(updateElectricBorders, 100);
        });
    </script>
</body>
</html>